<!DOCTYPE html>
<html lang="zh">
<head>
    <title>转换卡通图片</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="keywords" content="dev-coco, 图片转换, 转换卡通图片"/>
    <meta name="robots" content="index,follow"/>
    <meta name="description" content="转换卡通图片。"/>
    <link rel="icon" href="https://dev-coco.github.io/images/WebIcon.png">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://dev-coco.github.io/js/love.js" async="async"></script>
    <link rel="stylesheet" href="https://dev-coco.github.io/css/site.css">
</head>
<body>
    <div class="container">
<h1 style="text-align:left;"><img class="logo" alt="dev-coco" src="https://dev-coco.github.io/images/WebIcon.png"> Dev-Coco</h1>
<div class="menu">
  <a href="https://dev-coco.github.io/">主页</a>
  <a href="https://dev-coco.github.io/blog">博客</a>
  <a href="https://dev-coco.github.io/Featured-Software.html">软件</a>
  <a href="https://dev-coco.github.io/Online-Tools/">在线工具</a>
  <a href="https://dev-coco.github.io/Linux-Command/">Linux命令</a>
  <a target="_blank" href="https://github.com/dev-coco">Github</a>
</div>
<h2 style="text-align:center;">转换卡通图片</h2>
    <div class='content'>
        <img id="image1" hidden/>
        <img id="image2" hidden/>
        <img id="image3" /><br /><br /><br /><br />
        <div style="margin:4rem auto 3rem;height:10rem;width:10rem;border:solid 1px #aaa;box-shadow:0 0 5px #aaa;border-radius:1rem;text-align: center;line-height:10rem;position:relative">
        <div style="position: absolute;left: 50%;top: 50%;-webkit-transform: translate(-50%, -50%);"><img width="300px;" id="image"/></div>
        <small>上传头像</small>
        <input id="file-upload" type="file" accept="image/*" style="width:0;height:0;"/>
        <label for="file-upload" style="height: 10rem; width: 10rem; position: absolute; top: 0; left: 0; opacity: 0"></label>
    </div>
    </div>
    <script src="https://dev-coco.github.io/js/downscale.js"></script>
    <script src="https://dev-coco.github.io/js/glfx.js"></script>
    <script>function gbr_ink(e,t){var n=fx.canvas(),a=n.texture(document.getElementById(e));n.draw(a).ink(.35).update();new Image;document.getElementById(t).src=n.toDataURL()}function gbr_denoise(e,t){var n=fx.canvas(),a=n.texture(document.getElementById(e));n.draw(a).denoise(50).update();new Image;document.getElementById(t).src=n.toDataURL()}function gbr_contrast(e,t){var n=fx.canvas(),a=n.texture(document.getElementById(e));n.draw(a).brightnessContrast(.1,.2).update();new Image;document.getElementById(t).src=n.toDataURL(),setTimeout(function(){gbr_denoise("image2","image3")},2),setTimeout(function(){gbr_ink("image3","image")},4),setTimeout(function(){hapus_atr("#image1","src"),hapus_atr("#image2","src"),hapus_atr("#image3","src")},6)}function hapus_atr(e,t){for(var n=document.querySelectorAll(e),a=0;a<n.length;a++)n[a].removeAttribute(t)}function filesChanged(e){for(var t=0;t<e.length;t++)downscale(e[t],720,0).then(function(e){document.getElementById("image1").src=e,setTimeout(function(){gbr_contrast("image1","image2")},2)})}document.body.addEventListener("mouseover",function(e){document.body.onpaste=function(e){hapus_atr("image","src");for(var t=(e.clipboardData||e.originalEvent.clipboardData).items,n=null,a=0;a<t.length;a++)0===t[a].type.indexOf("image")&&(n=t[a].getAsFile());if(null!==n){var o=new FileReader;o.onload=function(e){var t=e.target.result;document.getElementById("image1").src=t,setTimeout(function(){gbr_contrast("image1","image2")},2)},o.readAsDataURL(n)}}}),document.body.addEventListener("mouseout",function(e){}),document.addEventListener("DOMContentLoaded",function(){var e=document.body;e.addEventListener("dragover",function(e){hapus_atr("image","src"),e.stopPropagation(),e.preventDefault()},!1),e.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),x=e.clientX,y=e.clientY;var t=e.dataTransfer.files[0];if(t.type.match("image.*")){var n=new FileReader;n.onload=function(e){var t=e.target.result,n=document.getElementById("image1");if(n.src=t,document.caretPositionFromPoint){var a=document.caretPositionFromPoint(x,y);range=document.createRange(),range.setStart(a.offsetNode,a.offset),range.collapse(),range.insertNode(n)}else document.caretRangeFromPoint?(range=document.caretRangeFromPoint(x,y),range.insertNode(n)):console.log("could not find carat");setTimeout(function(){gbr_contrast("image1","image2")},2)},n.readAsDataURL(t)}},!1);document.getElementById("file-upload").addEventListener("change",function(){!function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){var t=new Image;t.onload=function(){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=640,e.height=e.width*(t.height/t.width),n.drawImage(t,0,0,e.width,e.height);var a=e.toDataURL("image/png");document.getElementById("image1").src=a,setTimeout(function(){gbr_contrast("image1","image2")},2)},t.src=e.target.result},t.readAsDataURL(e.files[0])}}(this)})});</script>
</div>
</body>
</html>
