var centerX,centerY,star,i,canvas=document.getElementById("space"),c=canvas.getContext("2d"),numStars=3900,radius="0."+Math.floor(9*Math.random())+1,focalLength=2*canvas.width,warp=0,PI2=2*Math.PI,stars=[],starSpeed=0,animate=!0;initializeStars();var displayPoint=new DisplayPoint;function executeFrame(){animate&&requestAnimationFrame(executeFrame),displayPoint.update(),moveStars(),drawStars(),starSpeed&&scroll()}function initializeStars(){for(centerX=canvas.width/2,centerY=canvas.height/2,stars=[],i=0;i<numStars;i++)star={x:Math.random()*canvas.width,y:Math.random()*canvas.height,z:Math.random()*canvas.width,o:"0."+Math.floor(99*Math.random())+1},stars.push(star)}function moveStars(){for(i=0;i<numStars;i++)(star=stars[i]).z-=1+starSpeed,star.z<=0&&(star.z=canvas.width)}function drawStars(){var a,t,e;for(canvas.width==window.innerWidth&&canvas.width==window.innerWidth||(canvas.width=window.innerWidth,canvas.height=window.innerHeight,initializeStars()),0==warp&&(c.fillStyle="#000",c.fillRect(0,0,canvas.width,canvas.height)),c.fillStyle="rgba(209, 255, 255, "+radius+")",i=0;i<numStars;i++){var n=(star=stars[i]).x-centerX,r=star.y-centerY;a=n*(focalLength/star.z),a+=centerX,t=r*(focalLength/star.z),t+=centerY,e=focalLength/star.z*1,a+=displayPoint.point.x/20,t+=displayPoint.point.y/20,c.fillRect(a,t,e,e),c.fillStyle="rgba(209, 255, 255, "+star.o+")"}}function scroll(){Math.abs(starSpeed)<.5?starSpeed=0:starSpeed*=.9}displayPoint.init(),executeFrame(),document.addEventListener("wheel",function(a){starSpeed+=a.deltaY>0?1:starSpeed>3?-1:0});
